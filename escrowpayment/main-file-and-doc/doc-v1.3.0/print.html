<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Crypto Escrow</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="100% decentralized Crypto Escrow first ever created based on web3">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Basic</li><li class="chapter-item expanded "><a href="Introduction.html"><strong aria-hidden="true">1.</strong> Intro</a></li><li class="chapter-item expanded "><a href="Installation.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded affix "><li class="part-title">Usages</li><li class="chapter-item expanded "><a href="SignIn.html"><strong aria-hidden="true">3.</strong> Signing In</a></li><li class="chapter-item expanded "><a href="EscrowManagement.html"><strong aria-hidden="true">4.</strong> Escrow Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="CreateEscrow.html"><strong aria-hidden="true">4.1.</strong> Create Escrow</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Crypto Escrow</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="crypto-escrow"><a class="header" href="#crypto-escrow">Crypto Escrow</a></h1>
<p>Thank you again for purchasing <strong>Crypto Escrow</strong>. <strong>Crypto Escrow</strong> is a 100% <strong>decentralized</strong> <strong>Web3</strong> Escrow application. Generally, an Escrow application needs to be more transparent than any other white-level application. So, the <strong>web3</strong> platform is a good fit for it.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>Please follow the below sections step by step.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<ol>
<li>
<p>Basic <strong>Ethereum</strong> knowledge and a couple of minutes to follow this doc.</p>
</li>
<li>
<p>The latest nodeJS LTS installed locally and node and npm are accessible from terminal/cmd/Powershell. References: <a href="https://www.youtube.com/watch?v=__7eOCxJyow">Windows 10</a>, <a href="https://www.youtube.com/watch?v=OMhMnj7SBRQ">Ubuntu</a>, <a href="https://www.youtube.com/watch?v=SwUKKCS3r3c">macOS</a></p>
</li>
<li>
<p>An API key from <a href="https://infura.io">Infura</a>. Reference: <a href="https://www.youtube.com/watch?v=R2WkpF4Em7k">Infura API Key</a>. Do not worry about pricing. Start with the free plan. They won't force you to pay.</p>
<ul>
<li><strong>Note:</strong> We always prefer an Infura RPC URL but some networks have public RPC URLs (check bellow table). To use those public RPCs, just leave the <code>NEXT_PUBLIC_INFURA_KEY</code> ENV variable empty.</li>
<li><strong>Advance:</strong> If you have your own node and RPC or other RPC except infra, please feel free to contact us. We will guide you to use those with Crypto Escrow.</li>
</ul>
</li>
<li>
<p>An API key from <a href="https://web3.storage/">web3.storage</a>. Just sign up and generate an API key. Follow this link <a href="https://web3.storage/docs/#get-an-api-token">API Key</a>. Don't worry about pricing. It's providing an insane amount of resources for free.</p>
</li>
<li>
<p>A Chain ID of a network where you want to deploy the smart contract. Supported networks and chain ids...</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"><strong>Network</strong></th><th style="text-align: center"><strong>Chain ID</strong></th><th style="text-align: center"><strong>Public RPC</strong></th></tr></thead><tbody>
<tr><td style="text-align: center">Mainnet</td><td style="text-align: center">1</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Ropsten</td><td style="text-align: center">3</td><td style="text-align: center">no</td></tr>
<tr><td style="text-align: center">Rinkeby</td><td style="text-align: center">4</td><td style="text-align: center">no</td></tr>
<tr><td style="text-align: center">Goerli</td><td style="text-align: center">5</td><td style="text-align: center">no</td></tr>
<tr><td style="text-align: center">Kovan</td><td style="text-align: center">42</td><td style="text-align: center">no</td></tr>
<tr><td style="text-align: center">Optimism</td><td style="text-align: center">10</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Optimism Kovan</td><td style="text-align: center">69</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Arbitrum One</td><td style="text-align: center">42161</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Arbitrum Testnet</td><td style="text-align: center">421611</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Polygon Mainnet</td><td style="text-align: center">137</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Polygon Mumbai</td><td style="text-align: center">80001</td><td style="text-align: center">no</td></tr>
<tr><td style="text-align: center">Localhost 8545</td><td style="text-align: center">31337</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Binance Smart Chain</td><td style="text-align: center">56</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Binance Smart Chain Testnet</td><td style="text-align: center">97</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Fantom Opera</td><td style="text-align: center">250</td><td style="text-align: center">yes</td></tr>
<tr><td style="text-align: center">Fantom testnet</td><td style="text-align: center">4002</td><td style="text-align: center">yes</td></tr>
</tbody></table>
</div></li>
<li>
<p>A <strong>Crypto Wallet</strong> is installed and the address and private key of an account. That will be used to deploy the smart contract. That account will be the Owner. Please make sure you have a couple of ether to pay the gas fee upon contract deployment. You must remove the private key after you successfully deployed the contract to a network. That will not be disclosed to the front end. Only the owner's address will be public. So no worry. <a href="https://www.youtube.com/watch?v=mqYTNYz0kFY">How to export the private key from MetaMask</a></p>
</li>
</ol>
<h2 id="steps"><a class="header" href="#steps">Steps</a></h2>
<h3 id="setup-env"><a class="header" href="#setup-env">Setup Env</a></h3>
<p>After purchasing <strong>Crypto Escrow</strong> successfully, you will get a compressed zip file named <strong>crypto-escrow-v1.0.0.zip</strong> or something similar. Just extract that file at a suitable location on your local computer.</p>
<ol>
<li>
<p>Open up a terminal/cmd/PowerShell and navigate to the <strong>crypto-escrow</strong> directory or directly open into this directory where you should get a .env.setup file. Please make ensure your file explorer application shows you the hidden/dotfiles.</p>
</li>
<li>
<p>After navigating to that directory run the below commands...</p>
<pre><code class="language-shell">npm install
</code></pre>
<pre><code class="language-shell">cp .env.setup .env
</code></pre>
</li>
<li>
<p>Open up the .env file into one of your text editors and change a couple of things as below.</p>
<ul>
<li>
<p>Replace <code>__APP_NAME__</code> with your app title. Ex: Crypto Escrow.</p>
</li>
<li>
<p>Replace <code>__APP_CHAIN_ID_</code>_` with the chain id you choose from the above table. Ex: 5</p>
</li>
<li>
<p>Replace <code>__MINIMUM_ESCROW_AMOUNT_IN_ETHER_</code>_` with the minimum escrow amount allowed to create an escrow. In Ether. Ex: 0.001</p>
</li>
<li>
<p>Replace <code>__ESCROW_FEE_IN_PERCENT_</code>_` with the escrow fee the owner/you want to be paid upon escrow clearance. In %. Ex: 5</p>
</li>
<li>
<p>Replace <code>__WEB3_STORAGE_KEY_HERE__</code> with the Web3Storage API key that you generated before. Ex: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</p>
</li>
<li>
<p>Replace <code>__INFURA_KEY_HERE__</code> with the Infura API key. Ex: sdfasdfasdfsdfsdgffhgfghdgf</p>
</li>
<li>
<p>Replace <code>__DEPLOYER_ADDRESS_HERE__</code> with the owner's account address. Ex: 0xFe5e946EcccB0f59542D5B99740fa432423F2F63</p>
</li>
<li>
<p>Replace <code>__DEPLOYER_PRIVATE_KEY_HERE__</code> with the owner account private key.</p>
</li>
</ul>
</li>
</ol>
<h3 id="build-and-deploy-contract"><a class="header" href="#build-and-deploy-contract">Build And Deploy Contract</a></h3>
<p>If you followed all the above points carefully then you are now ready to build and deploy the contract. Run the below commands one by one carefully. Please make sure you have some ether into your deployer/owner address/account to pay the gas fee.</p>
<h4 id="build-contract"><a class="header" href="#build-contract">Build Contract</a></h4>
<pre><code class="language-shell">npm run build-contract
</code></pre>
<h4 id="deploy-contract"><a class="header" href="#deploy-contract">Deploy Contract</a></h4>
<pre><code class="language-shell">npm run deploy-contract
</code></pre>
<p>Wait some minutes after the above commands. Time depends on the network and other things. So, no worries. The deployment will be a success if you have enough ether to pay the gas fee.
If you get a response from the deploy command like below then the deployment is successful. In case you face any issues, please feel free to contact us.</p>
<p>```EscrowHub deployed to: 0x421F67801BDa8a0eA4B2BC9D564b5C62Ca599734`</p>
<h3 id="change-sign-in-text"><a class="header" href="#change-sign-in-text">Change Sign-In Text</a></h3>
<p>Open <strong>lib/settings.ts</strong> and change <code>SIGN_MESSAGE</code> right side content as needed. Add terms and condition URL if possible. This message will be shown while signing in to the app.</p>
<h3 id="production-deployment"><a class="header" href="#production-deployment">Production Deployment</a></h3>
<p>We recommend <a href="https://vercel.com">Vercel</a> as a serverless no hassle deployment server. They have really great support for NextJS-based application deployment.</p>
<h4 id="vercel-deployment"><a class="header" href="#vercel-deployment">Vercel Deployment</a></h4>
<p>You must need git installed into your local machine to deploy using this method.
Please check this <a href="https://www.youtube.com/watch?v=_8wkKL0LKks">Youtube Video</a> at least 3 times if you are not an expert. Then try to deploy to Vercel.</p>
<p>After the first deployment, you must set a couple of <strong>environment variables</strong> to the Vercel settings page. Go to the <strong>Environment Variables</strong> page of your <strong>Project Settings</strong>. Open your .env file and set all the variables except <code>DEPLOYER</code> from that file to the Vercel's <strong>Environment Variables</strong>** page. Then rebuild again. And your app is now ready to publish.</p>
<h4 id="vps-do-droplet-deployment"><a class="header" href="#vps-do-droplet-deployment">VPS, DO Droplet deployment</a></h4>
<p>This way of deployment is not so much easy. We recommend hiring an expert and spending some penny if you are not an expert. However, we are providing the guide.
Please check this <a href="https://www.youtube.com/watch?v=DbREUJNgxqw">Youtube Video</a> to learn this way.</p>
<p>Please ensure you upload the local .env file to the server also.</p>
<p>For more references, please check out this <a href="https://nextjs.org/docs/deployment">tutorial</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sign-in"><a class="header" href="#sign-in">Sign In</a></h1>
<p>To sign into the <strong>Crypto Escrow</strong> app, you must add a wallet to the application. Currently, <strong>Crypto Escrow</strong> support dedicated <a href="https://metamask.io">MetaMask</a>, <a href="https://www.coinbase.com/wallet">Coinbase</a> and <strong>170+</strong> more wallet through <a href="https://walletconnect.com">WalletConnect</a>. You can also connect via a QR code.</p>
<p>If you do not know how to install and use those wallets then please consider searching on <strong>Google</strong>** and <strong>YouTube</strong>. That is not our cup of tea. We are assuming that you already know one of those wallets.</p>
<p>Visit your domain/URL. At a very first glance, you should see a page like the one below asking to connect a wallet.</p>
<p><img src="images/all-wallets.png" alt="Connect Wallet" /></p>
<p>We used <strong>MetaMake</strong> to capture those images.</p>
<p>After connecting successfully you will be asked to sign into the <strong>Crypto Escrow</strong> app. Click on the <strong>Sign In</strong> button.</p>
<p><img src="images/signing-in.png" alt="Signing In" /></p>
<p>Click on <strong>Sign</strong> to sign in.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="escrow-management"><a class="header" href="#escrow-management">Escrow Management</a></h1>
<p><strong>Crypto Escrow</strong> is a React/Nextjs-based single-page application with no backend. It performs all its actions from the front end. But it is secure also. It uses IPFS/Filecoin decentralized object storage through Web3Storage to store metadata and other files. And all the queries and mutations to the smart contract you deployed before.</p>
<p>Let us describe the <strong>escrow</strong> lifecycle and properties.</p>
<ul>
<li>
<p>Every <strong>Escrow</strong> has some properties. An escrow belongs to two different parties, the first party (buyer) and the second party (seller).</p>
<ul>
<li><strong>First party (buyer)</strong>: Who creates/places a new escrow with other details.</li>
<li><strong>Second party (seller)</strong>: Seller address that the buyer (first party) provided while creating the escrow.</li>
</ul>
</li>
<li>
<p>Escrow title and description are metadata for an escrow where the title is required but the description is optional.</p>
</li>
<li>
<p>Ether amount will be provided by the buyer/first party while creating escrow inclusively and will be calculated and divided into two parts. The fee (the owner will receive upon fund clearance) and the actual amount the seller will receive if no refund happens. The entered amount will be transferred to the escrow from the buyer/first party's account while creating escrow.</p>
</li>
<li>
<p>The expiration time determines when the <strong>Escrow</strong> will be expired. After expiration, if the escrow is still in the initial state then the seller (2nd party) can claim the fund on his/her own.</p>
</li>
<li>
<p>An Escrow can have multiple statuses.</p>
<ul>
<li>The initial status is <strong>Awaiting Delivery</strong> just after the buyer created the escrow. The buyer can deliver funds at any time when the escrow is in <strong>Awaiting Delivery</strong> state. App owner and escrow seller can refund the buyer at any time in <strong>Awaiting Delivery</strong> state. All the actions must perform only in this state. Others' status will behave like stalled actually.</li>
<li>When the buyer delivers the funds, the state will change to <strong>COMPLETED</strong>. In this state, there are no actions that can perform on Escrow.</li>
<li>After creating escrow, the owner or the seller (second party) can refund the buyer at any time in <strong>Awaiting Delivery</strong>** state. After the refund transaction, the escrow state will change to the <strong>Refunded</strong> state.</li>
<li>After expiration time, if the escrow is still in <strong>Awaiting Delivery</strong> state, then the seller can claim the fund on their own. After a successful claim transaction, the escrow state will change to <strong>Claim after Expire</strong> state.</li>
</ul>
</li>
</ul>
<p>Whether the buyer (first party) delivers the fund or the seller (2nd party) claims the fund after expiration, the escrow fee will be transferred to the owner/deployer wallet address and the actual amount will be transferred to the seller.
But, if the Owner or the seller performs the refund then the whole amount (fee+escrow amount) will be refunded to the buyer's (first party) wallet address.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="create-escrow"><a class="header" href="#create-escrow">Create Escrow</a></h1>
<p>Click on the <strong>New Escrow</strong> button to create a new escrow. A popup with a couple of fields will be shown like the below image.</p>
<p><img src="images/creating-escrow.png" alt="Create Escrow" /></p>
<p>Please make sure you read <a href="./EscrowManagement.html">Escrow Management</a> carefully to learn the conceptual things about Escrow.</p>
<p>We recommend uploading small-sized PDFs or docs. Due to decentralized object storage, there is some limitation to it. It's not a limitation of <strong>Crypto Escrow</strong>.</p>
<p>After providing all the information click on submit. Processing will be started. Please do not close the browser or tab.</p>
<p><img src="images/creating-escrow-2.png" alt="Crypto Escrow 2" /></p>
<p>It will take some time to create the escrow. Time will depend on network status and other things.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </body>
</html>
